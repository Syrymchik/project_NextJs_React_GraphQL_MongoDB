{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Good\\\\Desktop\\\\Graphql\\\\gateway\\\\src\\\\16_rest_api\\\\rest_api.jsx\";\nimport React, { Component } from 'react';\nimport News from './news_fragment';\nconst BASE_API = 'https://hn.algolia.com/api/v1';\nconst SEARCH_PATH = '/search';\nconst SEARCH_PARAM = 'query=';\n\nclass Api extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      searchQuery: '',\n      result: {}\n    };\n    this.inputRef = React.createRef();\n\n    this.fetchData = searchQuery => {\n      fetch(BASE_API + SEARCH_PATH + '?' + SEARCH_PARAM + searchQuery).then(res => res.json()).then(result => this.setNews(result)).catch(error => console.log(error));\n    };\n\n    this.inputChange = () => {\n      this.setState({\n        searchQuery: this.inputRef.current.value\n      });\n    };\n\n    this.getSearch = ({\n      key\n    }) => {\n      console.log('Key = ' + key);\n\n      if (key === 'Enter') {\n        const {\n          searchQuery\n        } = this.state;\n        this.fetchData(searchQuery);\n      }\n    };\n\n    this.setNews = result => {\n      this.setState({\n        result\n      });\n    };\n  }\n\n  componentDidMount() {\n    const {\n      searchQuery\n    } = this.state;\n    this.fetchData(searchQuery);\n  }\n\n  render() {\n    const {\n      result\n    } = this.state;\n    const {\n      hits = []\n    } = result;\n    console.log('Length of hits ' + hits.length);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      ref: this.inputRef,\n      onChange: this.inputChange,\n      onKeyPress: this.getSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 29\n      }\n    }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 29\n      }\n    }, \"author\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 29\n      }\n    }, \"created\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 29\n      }\n    }, \"number comments\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 29\n      }\n    }, \"title\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 29\n      }\n    }, \"points\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 29\n      }\n    }, \"url\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    }, hits.map(({\n      author,\n      created_at,\n      num_comments,\n      objectID,\n      title,\n      points,\n      url\n    }, index) => /*#__PURE__*/React.createElement(News, {\n      key: index,\n      id: objectID,\n      author: author,\n      created: created_at,\n      num_comments: num_comments,\n      title: title,\n      points: points,\n      url: url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 33\n      }\n    })))));\n  }\n\n}\n\nexport default Api;","map":{"version":3,"sources":["C:/Users/Good/Desktop/Graphql/gateway/src/16_rest_api/rest_api.jsx"],"names":["React","Component","News","BASE_API","SEARCH_PATH","SEARCH_PARAM","Api","state","searchQuery","result","inputRef","createRef","fetchData","fetch","then","res","json","setNews","catch","error","console","log","inputChange","setState","current","value","getSearch","key","componentDidMount","render","hits","length","map","author","created_at","num_comments","objectID","title","points","url","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport News from './news_fragment';\r\n\r\nconst BASE_API = 'https://hn.algolia.com/api/v1';\r\nconst SEARCH_PATH = '/search';\r\nconst SEARCH_PARAM = 'query=';\r\n\r\nclass Api extends Component {\r\n\r\n    state = {\r\n        searchQuery: '',\r\n        result: {},\r\n    };\r\n\r\n    inputRef = React.createRef();\r\n\r\n    componentDidMount() {\r\n        const { searchQuery } = this.state;\r\n        this.fetchData(searchQuery);\r\n    }\r\n\r\n    fetchData = searchQuery => {\r\n        fetch(BASE_API + SEARCH_PATH + '?' + SEARCH_PARAM + searchQuery)\r\n            .then( res => res.json() )\r\n            .then( result => this.setNews(result))\r\n            .catch( error => console.log(error))\r\n    };\r\n\r\n    inputChange = () => {\r\n        this.setState({\r\n            searchQuery: this.inputRef.current.value\r\n        })\r\n    };\r\n\r\n    getSearch = ({key}) => {\r\n        console.log('Key = ' + key );\r\n        if (key === 'Enter') {\r\n            const { searchQuery } = this.state;\r\n            this.fetchData(searchQuery);\r\n        }\r\n    };\r\n\r\n    setNews = result => {\r\n        this.setState({ result })\r\n\r\n    };\r\n\r\n    render() {\r\n        const { result } = this.state;\r\n        const { hits = [] } = result;\r\n        console.log( 'Length of hits ' + hits.length );\r\n        return (\r\n            <div>\r\n                <input type=\"text\" ref={this.inputRef} onChange={this.inputChange} onKeyPress={this.getSearch}/>\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>ID</th>\r\n                            <th>author</th>\r\n                            <th>created</th>\r\n                            <th>number comments</th>\r\n                            <th>title</th>\r\n                            <th>points</th>\r\n                            <th>url</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            hits.map(({ author, created_at, num_comments, objectID, title, points, url }, index) =>\r\n                                <News\r\n                                    key={index}\r\n                                    id={objectID}\r\n                                    author={author}\r\n                                    created={created_at}\r\n                                    num_comments={num_comments}\r\n                                    title={title}\r\n                                    points={points}\r\n                                    url={url}\r\n                                />\r\n                            )\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default Api"]},"metadata":{},"sourceType":"module"}