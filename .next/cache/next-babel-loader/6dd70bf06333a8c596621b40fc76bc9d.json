{"ast":null,"code":"const BASE_API = 'http://localhost:3005/api';\n\nconst axios = require('axios');\n\nasync function fetchAPI(query, {\n  variables\n} = {}) {\n  const res = await axios.post(BASE_API, JSON.stringify({\n    query,\n    variables\n  }).replace(/\\\\n/g, ''), {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }).then(res => {\n    console.log('FetchApi: ' + res.data);\n    return res.data.data;\n  }).catch(err => {\n    console.log(err);\n    return [];\n  });\n  return res;\n}\n\nexport async function getAllPosts(name = 'hot', limit = 10, after = '', before = '') {\n  const data = await fetchAPI(` \n    query ($limit: Int, $after: String, $before: String){\n       ${name}(limit: $limit, after: $after, before: $before){\n            topics{\n              subreddit\n              id\n              title\n              score\n              thumbnail\n              url\n            }\n           before\n           after\n           dist\n        }\n    }\n  `, {\n    variables: {\n      limit,\n      after,\n      before\n    }\n  });\n  return data;\n}","map":{"version":3,"sources":["C:/Users/Good/Desktop/Graphql/gateway/src/lib/api.js"],"names":["BASE_API","axios","require","fetchAPI","query","variables","res","post","JSON","stringify","replace","headers","then","console","log","data","catch","err","getAllPosts","name","limit","after","before"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,2BAAjB;;AACA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAGA,eAAeC,QAAf,CAAwBC,KAAxB,EAA+B;AAAEC,EAAAA;AAAF,IAAgB,EAA/C,EAAmD;AAE/C,QAAMC,GAAG,GAAG,MAAML,KAAK,CAACM,IAAN,CAAWP,QAAX,EAAqBQ,IAAI,CAACC,SAAL,CAAe;AAACL,IAAAA,KAAD;AAAQC,IAAAA;AAAR,GAAf,EAAoCK,OAApC,CAA4C,MAA5C,EAAoD,EAApD,CAArB,EAA8E;AAC5FC,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX;AADmF,GAA9E,EAKbC,IALa,CAKRN,GAAG,IAAI;AACTO,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAeR,GAAG,CAACS,IAA/B;AACA,WAAOT,GAAG,CAACS,IAAJ,CAASA,IAAhB;AACH,GARa,EASbC,KATa,CASPC,GAAG,IAAI;AACVJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACA,WAAO,EAAP;AACH,GAZa,CAAlB;AAcA,SAAOX,GAAP;AACH;;AAGD,OAAO,eAAeY,WAAf,CAA2BC,IAAI,GAAG,KAAlC,EAAyCC,KAAK,GAAG,EAAjD,EAAqDC,KAAK,GAAG,EAA7D,EAAiEC,MAAM,GAAG,EAA1E,EAA8E;AACjF,QAAMP,IAAI,GAAG,MAAMZ,QAAQ,CAAE;;SAExBgB,IAAK;;;;;;;;;;;;;;GAFiB,EAgB1B;AAAEd,IAAAA,SAAS,EAAE;AAAEe,MAAAA,KAAF;AAASC,MAAAA,KAAT;AAAgBC,MAAAA;AAAhB;AAAb,GAhB0B,CAA3B;AAkBF,SAAOP,IAAP;AACD","sourcesContent":["const BASE_API = 'http://localhost:3005/api';\r\nconst axios = require('axios');\r\n\r\n\r\nasync function fetchAPI(query, { variables } = {}) {\r\n\r\n    const res = await axios.post(BASE_API, JSON.stringify({query, variables,}).replace(/\\\\n/g, ''), {\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        }\r\n    })\r\n        .then(res => {\r\n            console.log('FetchApi: ' + res.data);\r\n            return res.data.data;\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            return [];\r\n        });\r\n\r\n    return res;\r\n}\r\n\r\n\r\nexport async function getAllPosts(name = 'hot', limit = 10, after = '', before = '') {\r\n    const data = await fetchAPI(` \r\n    query ($limit: Int, $after: String, $before: String){\r\n       ${name}(limit: $limit, after: $after, before: $before){\r\n            topics{\r\n              subreddit\r\n              id\r\n              title\r\n              score\r\n              thumbnail\r\n              url\r\n            }\r\n           before\r\n           after\r\n           dist\r\n        }\r\n    }\r\n  `, { variables: { limit, after, before } });\r\n\r\n  return data;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}