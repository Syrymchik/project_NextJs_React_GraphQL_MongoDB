{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\Good\\\\Desktop\\\\Graphql\\\\gateway\\\\src\\\\pages\\\\[index].js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Nav from '../component/nav/nav';\nimport TableComponent from '../component/table/table';\nimport Pagination from '../component/pagination/pagination';\nimport TopicSearch from \"../component/topic_search/topic_search\";\n\nclass Index extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {});\n  }\n\n  render() {\n    const {\n      index,\n      posts = {},\n      query,\n      beforeOld,\n      afterOld\n    } = this.props;\n    const {\n      topics,\n      before,\n      after\n    } = posts;\n    const {\n      limit,\n      text\n    } = query;\n\n    let pag = __jsx(Pagination, {\n      after: after,\n      afterOld: afterOld,\n      before: before,\n      beforeOld: beforeOld,\n      index: index,\n      limit: limit,\n      text: text,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 19\n      }\n    });\n\n    let searchComp = __jsx(TopicSearch, {\n      text: text,\n      limit: limit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 26\n      }\n    });\n\n    if (index === 'bookmark') pag = null;\n    if (index !== 'search') searchComp = null;\n    if (topics.length <= 0) return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 13\n      }\n    }, __jsx(Nav, {\n      limit: limit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 17\n      }\n    }), pag, searchComp, __jsx(TableComponent, {\n      list: topics,\n      isBookmark: index === 'bookmark',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport var __N_SSP = true;\nexport default Index;","map":{"version":3,"sources":["C:/Users/Good/Desktop/Graphql/gateway/src/pages/[index].js"],"names":["React","Component","Nav","TableComponent","Pagination","TopicSearch","Index","render","index","posts","query","beforeOld","afterOld","props","topics","before","after","limit","text","pag","searchComp","length"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,GAAP,MAAgB,sBAAhB;AACA,OAAOC,cAAP,MAA2B,0BAA3B;AACA,OAAOC,UAAP,MAAuB,oCAAvB;AAEA,OAAOC,WAAP,MAAwB,wCAAxB;;AAGA,MAAMC,KAAN,SAAoBL,SAApB,CAA8B;AAAA;AAAA;;AAAA,mCAElB,EAFkB;AAAA;;AAI1BM,EAAAA,MAAM,GAAE;AACJ,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA,KAAK,GAAG,EAAjB;AAAqBC,MAAAA,KAArB;AAA4BC,MAAAA,SAA5B;AAAuCC,MAAAA;AAAvC,QAAoD,KAAKC,KAA/D;AACA,UAAM;AAAEC,MAAAA,MAAF;AAAUC,MAAAA,MAAV;AAAkBC,MAAAA;AAAlB,QAA4BP,KAAlC;AACA,UAAM;AAAEQ,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAkBR,KAAxB;;AAEA,QAAIS,GAAG,GAAG,MAAC,UAAD;AAAY,MAAA,KAAK,EAAEH,KAAnB;AAA0B,MAAA,QAAQ,EAAEJ,QAApC;AAA8C,MAAA,MAAM,EAAEG,MAAtD;AAA8D,MAAA,SAAS,EAAEJ,SAAzE;AAAoF,MAAA,KAAK,EAAEH,KAA3F;AAAkG,MAAA,KAAK,EAAES,KAAzG;AAAgH,MAAA,IAAI,EAAEC,IAAtH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAV;;AACA,QAAIE,UAAU,GAAG,MAAC,WAAD;AAAa,MAAA,IAAI,EAAEF,IAAnB;AAAyB,MAAA,KAAK,EAAED,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAjB;;AACA,QAAIT,KAAK,KAAK,UAAd,EAA0BW,GAAG,GAAG,IAAN;AAC1B,QAAIX,KAAK,KAAK,QAAd,EAAwBY,UAAU,GAAG,IAAb;AACxB,QAAIN,MAAM,CAACO,MAAP,IAAiB,CAArB,EAEA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,GAAD;AAAK,MAAA,KAAK,EAAEJ,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEKE,GAFL,EAGKC,UAHL,EAII,MAAC,cAAD;AAAgB,MAAA,IAAI,EAAEN,MAAtB;AAA8B,MAAA,UAAU,EAAEN,KAAK,KAAK,UAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,CADJ;AAQH;;AAvByB;;;AA0B9B,eAAeF,KAAf","sourcesContent":["import React, {Component} from 'react';\nimport Nav from '../component/nav/nav'\nimport TableComponent from '../component/table/table'\nimport Pagination from '../component/pagination/pagination'\nimport {getAllPosts, getAllPostsByText} from '../lib/api'\nimport TopicSearch from \"../component/topic_search/topic_search\";\n\n\nclass Index extends Component {\n\n    state = {};\n\n    render(){\n        const { index, posts = {}, query, beforeOld, afterOld } = this.props;\n        const { topics, before, after } = posts;\n        const { limit, text } = query;\n\n        let pag = <Pagination after={after} afterOld={afterOld} before={before} beforeOld={beforeOld} index={index} limit={limit} text={text} />;\n        let searchComp = <TopicSearch text={text} limit={limit}/>;\n        if (index === 'bookmark') pag = null;\n        if (index !== 'search') searchComp = null;\n        if (topics.length <= 0) \n\n        return(\n            <div>\n                <Nav limit={limit}/>\n                {pag}\n                {searchComp}\n                <TableComponent list={topics} isBookmark={index === 'bookmark'}/>\n            </div>\n        )\n    }\n}\n\nexport default Index;\n\n\nexport async function getServerSideProps(context) {\n\n    const { query, params } = context;\n    const { limit = 10, after = '', before = '', text = '' } = query;\n    const { index = 'hot' } = params;\n    const afterOld = after, beforeOld = before;\n    let result;\n\n    if (index !== 'search') result = (await getAllPosts(index, limit, after, before)) || [];\n    else result = (await getAllPostsByText(limit, after, before, text)) || [];\n\n    const posts = result[index] || [];\n\n    return {\n        props: {\n            posts,\n            query,\n            index,\n            afterOld,\n            beforeOld,\n        },\n    }\n}\n"]},"metadata":{},"sourceType":"module"}