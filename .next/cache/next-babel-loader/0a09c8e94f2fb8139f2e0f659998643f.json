{"ast":null,"code":"const BASE_API = 'http://localhost:3005/api';\n\nasync function fetchAPI(query, {\n  variables,\n  preview\n} = {}) {\n  const res = await fetch(BASE_API + (preview ? '/preview' : ''), {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json' // Authorization: `Bearer ${API_TOKEN}`,\n\n    },\n    body: JSON.stringify({\n      query,\n      variables\n    })\n  });\n  const json = await res.json();\n\n  if (json.errors) {\n    console.error(json.errors);\n    throw new Error('Failed to fetch API');\n  }\n\n  return json.data;\n}\n\nexport async function getAllPostsWithSlug() {\n  const data = fetchAPI(`\n    {\n       hot{\n            topics{\n              subreddit\n              id\n              title\n              score\n              thumbnail\n              url\n            }\n           before\n           after\n           dist\n        }\n    }\n  `);\n  return data === null || data === void 0 ? void 0 : data.allPosts;\n}\nexport async function getAllPostsForHome(preview) {\n  const data = await fetchAPI(`\n    {\n      allPosts(orderBy: date_DESC, first: 20) {\n        title\n        slug\n        excerpt\n        date\n        coverImage {\n          responsiveImage(imgixParams: {fm: jpg, fit: crop, w: 2000, h: 1000 }) {\n            ...responsiveImageFragment\n          }\n        }\n        author {\n          name\n          picture {\n            url(imgixParams: {fm: jpg, fit: crop, w: 100, h: 100, sat: -100})\n          }\n        }\n      }\n    }\n    ${responsiveImageFragment}\n  `, {\n    preview\n  });\n  return data === null || data === void 0 ? void 0 : data.allPosts;\n}","map":{"version":3,"sources":["C:/Users/Good/Desktop/Graphql/gateway/src/lib/api.js"],"names":["BASE_API","fetchAPI","query","variables","preview","res","fetch","method","headers","body","JSON","stringify","json","errors","console","error","Error","data","getAllPostsWithSlug","allPosts","getAllPostsForHome","responsiveImageFragment"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,2BAAjB;;AAEA,eAAeC,QAAf,CAAwBC,KAAxB,EAA+B;AAAEC,EAAAA,SAAF;AAAaC,EAAAA;AAAb,IAAyB,EAAxD,EAA4D;AACxD,QAAMC,GAAG,GAAG,MAAMC,KAAK,CAACN,QAAQ,IAAII,OAAO,GAAG,UAAH,GAAgB,EAA3B,CAAT,EAAyC;AAC5DG,IAAAA,MAAM,EAAE,MADoD;AAE5DC,IAAAA,OAAO,EAAE;AACL,sBAAgB,kBADX,CAEL;;AAFK,KAFmD;AAM5DC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBT,MAAAA,KADiB;AAEjBC,MAAAA;AAFiB,KAAf;AANsD,GAAzC,CAAvB;AAYA,QAAMS,IAAI,GAAG,MAAMP,GAAG,CAACO,IAAJ,EAAnB;;AACA,MAAIA,IAAI,CAACC,MAAT,EAAiB;AACbC,IAAAA,OAAO,CAACC,KAAR,CAAcH,IAAI,CAACC,MAAnB;AACA,UAAM,IAAIG,KAAJ,CAAU,qBAAV,CAAN;AACH;;AACD,SAAOJ,IAAI,CAACK,IAAZ;AACH;;AAID,OAAO,eAAeC,mBAAf,GAAqC;AACxC,QAAMD,IAAI,GAAGhB,QAAQ,CAAE;;;;;;;;;;;;;;;;GAAF,CAArB;AAkBF,SAAOgB,IAAP,aAAOA,IAAP,uBAAOA,IAAI,CAAEE,QAAb;AACD;AAED,OAAO,eAAeC,kBAAf,CAAkChB,OAAlC,EAA2C;AAC9C,QAAMa,IAAI,GAAG,MAAMhB,QAAQ,CACtB;;;;;;;;;;;;;;;;;;;;MAoBHoB,uBAAwB;GArBC,EAuBvB;AAAEjB,IAAAA;AAAF,GAvBuB,CAA3B;AAyBA,SAAOa,IAAP,aAAOA,IAAP,uBAAOA,IAAI,CAAEE,QAAb;AACH","sourcesContent":["const BASE_API = 'http://localhost:3005/api';\r\n\r\nasync function fetchAPI(query, { variables, preview } = {}) {\r\n    const res = await fetch(BASE_API + (preview ? '/preview' : ''), {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            // Authorization: `Bearer ${API_TOKEN}`,\r\n        },\r\n        body: JSON.stringify({\r\n            query,\r\n            variables,\r\n        }),\r\n    });\r\n\r\n    const json = await res.json();\r\n    if (json.errors) {\r\n        console.error(json.errors);\r\n        throw new Error('Failed to fetch API')\r\n    }\r\n    return json.data\r\n}\r\n\r\n\r\n\r\nexport async function getAllPostsWithSlug() {\r\n    const data = fetchAPI(`\r\n    {\r\n       hot{\r\n            topics{\r\n              subreddit\r\n              id\r\n              title\r\n              score\r\n              thumbnail\r\n              url\r\n            }\r\n           before\r\n           after\r\n           dist\r\n        }\r\n    }\r\n  `);\r\n\r\n  return data?.allPosts\r\n}\r\n\r\nexport async function getAllPostsForHome(preview) {\r\n    const data = await fetchAPI(\r\n        `\r\n    {\r\n      allPosts(orderBy: date_DESC, first: 20) {\r\n        title\r\n        slug\r\n        excerpt\r\n        date\r\n        coverImage {\r\n          responsiveImage(imgixParams: {fm: jpg, fit: crop, w: 2000, h: 1000 }) {\r\n            ...responsiveImageFragment\r\n          }\r\n        }\r\n        author {\r\n          name\r\n          picture {\r\n            url(imgixParams: {fm: jpg, fit: crop, w: 100, h: 100, sat: -100})\r\n          }\r\n        }\r\n      }\r\n    }\r\n    ${responsiveImageFragment}\r\n  `,\r\n        { preview }\r\n    )\r\n    return data?.allPosts\r\n}\r\n"]},"metadata":{},"sourceType":"module"}